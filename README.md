# Перечень плановых проверок

## Предметная область

В данной задаче выделяются три сущности предметной области:
- субъект малого бизнеса (СМБ)
- контролирующий орган (КО)
- плановая проверка

Пусть для простоты СМБ и КО характеризуются только названиями (name), проверка же характеризуется
СМБ, КО, плановым периодом (даты from, to), плановой длительностью (duration). 

> [УТОЧНИТЬ] 
> Исходя из задания, непонятно, что такое эта длительность и в чем она измеряется - часы, дни?

### Ограничения
Предполагается, что:
- названия СМБ и КО уникальны в своих контекстах 
- диапазон дат периода проверок не должен быть слишком велик 
- дата начала должна предшествовать дате завершения 
- один и тот же КО не может проверять один и тот же СМБ в одно и то же время более одного раза

Данные ограничения должны проверяться на разных уровнях в том числе в схеме базы данных.

## Реализация
Задание выполнено с использованием PostgreSQL, Codeigniter, JQuery, Bootstrap и их плагинов.

Реализована частичная функциональность:
- миграции, создающие таблицы сущностей и некоторые ограничения предметной области: 
  - СМБ (small_business_subjects)
  - КО (supervisors)
  - проверки (examinations)
  - сводное представление для удобства получения данных проверок (examinations_view)
- тестовые данные (seeds)
- форма поиска проверок по двум полям: именам СМБ и КО
- список проверок с возможностью выбора элементов
- форма создания проверки
- экспорт текущего списка проверок в Excel-файл
- некоторая адаптивность интерфейса к размеру экрана

Не реализовано, но предполагается к реализации:
- проверки ограничений предметной области на всех уровнях
- удаление выбранных проверок
- импорт данных из Excel-файла
- валидация и дабавление проверки в базу данных
- полная адаптивность к размеру экрана - сокрытие или изменение размеров элементов, шрифтов и т.п.


## Установка и запуск

Для установки и запуска выполнить в консоли следующие команды (пример для Linux bash):

```
# Клонировать репозиторий 
$ git clone https://github.com/erkinsergey/frigate

# Перейти в каталог проекта
$ cd frigate

# Установить зависимости
$ composer install

# Создать базу данных, настроить подключение: 
# создать файл .env в корне 
# или отредактировать app/Config/Database.php, 
# прописав настройки подключения

# Создать структуру базы данных и заполнить тестовыми данными 
$ php spark migrate && php spark db:seed

# Запустить тестовый сервер
php spark serve

# Открыть в браузере выведенную ссылку, например, http://localhost:8080

```

## Скриншоты

В папке screenshots находятся несколько скриншотов - примеров работы приложения.  